{"version":3,"sources":["api/api.js","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","components/Navbar/Navbar.jsx","redux/reducer_app.js","redux/reducer_sidebar.js","redux/redux-store.js","App.js","serviceWorker.js","index.js","redux/reducer_auth.js","components/common/Preloader/Preloader.jsx","components/Header/Header.module.sass","components/common/Preloader/Preloader.module.sass","redux/reducer_profile.js","redux/reducer_dialogs.js","components/Navbar/Navbar.module.sass","utils/objectHelpers.js","redux/reducer_users.js","assets/img/logo.png","assets/img/spinner.svg","assets/img/spinnerBlue.svg"],"names":["axiosInstance","axios","create","withCredentials","baseURL","headers","randomPhotos","authAPI","authMe","get","login","email","password","rememberMe","post","logout","delete","usersAPI","getUsersList","pageNumber","pageSize","then","res","i","arr","data","items","map","e","length","photos","small","totalCount","console","warn","getUser","userId","profileAPI","getProfile","deleteFriend","addFriend","getStatus","updateStatus","status","put","Header","props","className","styles","header","src","logo","alt","loginBlock","isAuth","onClick","to","HeaderContainer","this","React","Component","connect","state","auth","id","Navbar","nav","item","activeClassName","active","initialState","initialized","appReducer","action","setInitialized","type","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","usersPage","usersReducer","authReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","ProfileContainer","lazy","DialogsContainer","UsersContainer","Login","App","initializeApp","Preloader","color","name","fallback","path","render","AppContainer","dispatch","Promise","all","getAuthUserData","withRouter","MainApp","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","isFetching","isAuthingInProgress","setAuthUserData","payload","a","resultCode","log","errorMessage","messages","stopSubmit","_error","setUserData","classes","classNames","preloader","preloaderBlue","none","module","exports","posts","likes","sort","b","newPostText","profile","addPostActionCreator","setStatus","getUserProfile","addPost","profilePagePosts","newPost","setUserProfile","filter","postId","dialogs","sendMessageCreator","newMessageText","addMessage","text","newMessage","updateObjectInArray","objPropName","newObjProps","users","totalUsersCount","currentPage","followingInProgress","follow","unfollow","setUsers","setCurrentPage","setUsersTotalCount","toggleIsFetching","toggleFollowingInProgress","buttonId","getUsers","followUnfollowFlow","btnIndex","apiMethod","actionCreator","followed"],"mappings":"uGAAA,kHAEMA,EAFN,OAEsBC,EAAMC,OAAO,CACjCC,iBAAiB,EACjBC,QAAS,gDACTC,QAAS,CACP,UAAW,0CAITC,EAAe,CACnB,8MACA,qDACA,gNACA,+HACA,oMACA,wGACA,wGACA,wGACA,gFAIWC,EAAU,CACrBC,OADqB,WAEnB,OAAOR,EAAcS,IAAd,aAETC,MAJqB,SAIfC,EAAOC,GAA+B,IAArBC,EAAoB,wDACzC,OAAOb,EAAcc,KAAd,cAAkC,CAACH,QAAOC,WAAUC,gBAE7DE,OAPqB,WAQnB,OAAOf,EAAcgB,OAAd,iBAIEC,EAAW,CACtBC,aADsB,WACuB,IAAhCC,EAA+B,uDAAlB,EAAGC,EAAe,uDAAJ,GACtC,OAAOpB,EAAcS,IAAd,qBAAgCU,EAAhC,kBAAoDC,IAAYC,MAAK,SAAAC,GAC1E,IAAIC,EAAI,EAMR,MAAO,CACLC,IANQF,EAAIG,KAAKC,MAAMC,KAAI,SAAAC,GAG3B,OAFIL,IAAMjB,EAAauB,SAAQN,EAAI,GAC9BK,EAAEE,OAAOC,QAAOH,EAAEE,OAAOC,MAAQzB,EAAaiB,MAC5CK,KAIPI,WAAYV,EAAIG,KAAKO,gBAI3BxB,OAfsB,WAiBpB,OADAyB,QAAQC,KAAK,iDACN3B,EAAQC,UAEjB2B,QAnBsB,SAmBdC,GAEN,OADAH,QAAQC,KAAK,mDACNG,EAAWC,WAAWF,IAE/BG,aAvBsB,SAuBTH,GACX,OAAOpC,EAAcgB,OAAd,iBAA+BoB,KAExCI,UA1BsB,SA0BZJ,GACR,OAAOpC,EAAcc,KAAd,iBAA6BsB,MAI3BC,EAAa,CACxBC,WADwB,SACbF,GACT,OAAOpC,EAAcS,IAAd,kBAA6B2B,KAEtCK,UAJwB,SAIdL,GACR,OAAOpC,EAAcS,IAAd,yBAAoC2B,KAE7CM,aAPwB,SAOXC,GACX,OAAO3C,EAAc4C,IAAd,iBAAoC,CAACD,c,kPCjDjCE,EApBA,SAACC,GACd,OACE,4BAAQC,UAAWC,IAAOC,QACxB,yBAAKC,IAAKC,IAAMC,IAAI,OAAOL,UAAWC,IAAOG,OAE7C,0BAAMJ,UAAWC,IAAOK,YAEnBP,EAAMQ,OACL,6BACGR,EAAMpC,MADT,IACgB,4BAAQ6C,QAAST,EAAM/B,QAAvB,WAGhB,kBAAC,IAAD,CAASyC,GAAI,UAAb,Y,gBCZNC,E,uKAIF,OACE,kBAAC,EAAWC,KAAKZ,W,GALOa,IAAMC,WAkBrBC,eARS,SAACC,GAAD,MAAY,CAClCR,OAAQQ,EAAMC,KAAKT,OACnB5C,MAAOoD,EAAMC,KAAKrD,MAClBC,MAAOmD,EAAMC,KAAKpD,MAClBqD,GAAIF,EAAMC,KAAKC,MAKf,CACEjD,YAFW8C,CAIbJ,G,gBCJaQ,EAnBA,WACb,OACI,yBAAKlB,UAAWC,IAAOkB,KACrB,yBAAKnB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,WAAWY,gBAAiBpB,IAAOqB,QAA/C,YACF,yBAAKtB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,YAAYY,gBAAiBpB,IAAOqB,QAAhD,aACF,yBAAKtB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,QAAQY,gBAAiBpB,IAAOqB,QAA5C,SACF,yBAAKtB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,SAASY,gBAAiBpB,IAAOqB,QAA7C,UACF,yBAAKtB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,YAAYY,gBAAiBpB,IAAOqB,QAAhD,aACF,yBAAKtB,UAAWC,IAAOmB,MACrB,kBAAC,IAAD,CAASX,GAAG,SAASY,gBAAiBpB,IAAOqB,QAA7C,iB,cCbNC,EAAe,CACfC,aAAa,GAoCFC,EAjCI,WAAmC,IAAlCV,EAAiC,uDAAzBQ,EAAcG,EAAW,uCAE3CC,EAAiB,WACnB,OAAO,2BACAZ,GADP,IAEIS,aAAa,KAIrB,OAAQE,EAAOE,MACX,IAhBgB,kBAgBM,OAAOD,IAC7B,QAAS,OAAOZ,I,gCCpBpBQ,EAAe,GASJM,EALQ,WAAmC,IAAlCd,EAAiC,uDAAzBQ,EAE5B,OAAOR,G,wBCIPe,EAAWC,YAAgB,CAC3BC,YAAaC,IACbC,YAAaC,IACbC,QAASP,EACTQ,UAAWC,IACXtB,KAAMuB,IACNC,KAAMC,IACNC,IAAKjB,IAIHkB,EAAmBC,OAAOC,sCAAwCC,IAMzDC,EALDC,YAAYlB,EAAgCa,EACtDM,YAAgBC,O,QCLdC,EAAmBC,aAAK,kBAAM,uDAC9BC,EAAmBD,aAAK,kBAAM,uDAC9BE,EAAiBF,aAAK,kBAAM,iCAC5BG,EAAQH,aAAK,kBAAM,uDAEnBI,E,kLAGF7C,KAAKZ,MAAM0D,kB,+BAKX,OAAK9C,KAAKZ,MAAMyB,YAMd,yBAAKxB,UAAU,cACb,kBAAC0D,EAAA,EAAD,CAAWC,MAAO,SAClB,kBAAC,EAAD,CAAiBC,KAAM,UAEvB,kBAAC,EAAD,MACA,yBAAK5D,UAAU,qBAEb,kBAAC,WAAD,CAAU6D,SAAU,kBAACH,EAAA,EAAD,CAAWC,MAAO,UACpC,kBAAC,IAAD,CAAOG,KAAK,YAAYC,OAAQ,kBAC9B,kBAACV,EAAD,SAEF,kBAAC,IAAD,CAAOS,KAAK,oBAAoBC,OAAQ,kBACtC,kBAACZ,EAAD,SAGF,kBAAC,IAAD,CAAOW,KAAK,SAASC,OAAQ,kBAC3B,kBAACT,EAAD,SAGF,kBAAC,IAAD,CAAOQ,KAAK,SAASC,OAAQ,kBAC3B,kBAACR,EAAD,YAzBD,kBAACG,EAAA,EAAD,CAAWC,MAAO,a,GATb/C,IAAMC,WAkDpBmD,EAAelB,YACjBhC,aAPoB,SAACC,GACrB,MAAO,CACLS,YAAaT,EAAM2B,IAAIlB,eAKA,CAAEiC,cH5CA,kBAAM,SAACQ,GAEhCC,QAAQC,IAAI,CAACF,EAASG,iBAErB9F,MAAK,WACF2F,EAPgC,CAAErC,KAzBlB,2BGwEtByC,IAFiBvB,CAGjBU,GAUac,EARC,SAACvE,GACf,OAAO,kBAAC,IAAD,KACL,kBAAC,IAAD,CAAUgD,MAAOA,GACf,kBAACiB,EAAD,S,OCrEcO,QACW,cAA7B3B,OAAO4B,SAASC,UAEe,UAA7B7B,OAAO4B,SAASC,UAEhB7B,OAAO4B,SAASC,SAASC,MACvB,2DCXNC,IAASZ,OAEH,kBAAC,EAAD,MAEFa,SAASC,eAAe,SDwHtB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB1G,MAAK,SAAA2G,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLlG,QAAQkG,MAAMA,EAAMC,a,0LErIxB9D,EAAe,CACflC,OAAQ,KACRzB,MAAO,KACPD,MAAO,KACP2H,YAAY,EACZ/E,QAAQ,EACRgF,qBAAqB,GAoBZC,EAAkB,SAACvE,EAAIrD,EAAOD,EAAO4C,GAAnB,MAA+B,CAC1DqB,KA7BkB,gBA8BlB6D,QAAS,CAAExE,KAAIrD,QAAOD,QAAO4C,YAKpB6D,EAAkB,yDAAM,WAAOH,GAAP,uBAAAyB,EAAA,sEACjBlI,IAAQC,SADS,OAGL,KAFxBc,EAD6B,QAGzBG,KAAKiH,aAAmB,EACDpH,EAAIG,KAAKA,KAA9BuC,EADqB,EACrBA,GAAIrD,EADiB,EACjBA,MAAOD,EADU,EACVA,MACjBsG,EAASuB,EAAgBvE,EAAIrD,EAAOD,GAAO,KALd,2CAAN,uDASlBA,EAAQ,SAACC,EAAOC,EAAUC,GAAlB,8CAAiC,WAAOmG,GAAP,iBAAAyB,EAAA,sEAClClI,IAAQG,MAAMC,EAAOC,EAAUC,GADG,OAEtB,KADxBS,EAD8C,QAE1CG,KAAKiH,WACT1B,EAASG,MAETlF,QAAQ0G,IAAIrH,EAAIG,MACZmH,EAAetH,EAAIG,KAAKoH,SAAShH,OAAS,EAAIP,EAAIG,KAAKoH,SAAS,GAAK,aACzE7B,EAAS8B,YAAW,QAAS,CAAEC,OAAQH,MAPO,2CAAjC,uDAWR7H,EAAS,yDAAM,WAAOiG,GAAP,SAAAyB,EAAA,sEACRlI,IAAQQ,SADA,OAEI,IAFJ,OAEhBU,KAAKiH,YACT1B,EAASuB,EAAgB,KAAM,KAAM,MAAM,IAHvB,2CAAN,uDAQPjD,IApDK,WAAmC,IAAlCxB,EAAiC,uDAAzBQ,EAAcG,EAAW,uCAE5CuE,EAAc,WAChB,OAAO,uCACAlF,GACAW,EAAO+D,SAFd,IAGIF,qBAAqB,KAI7B,OAAQ7D,EAAOE,MACX,IAtBc,gBAsBM,OAAOqE,IAC3B,QAAS,OAAOlF,K,gKCnBlB2C,E,uKAIQ,IAAD,EACCwC,EAAUC,KAAU,mBACrBlG,IAAOmG,UAAiC,UAArBzF,KAAKZ,MAAM4D,OADT,cAErB1D,IAAOoG,cAAqC,SAArB1F,KAAKZ,MAAM4D,OAFb,cAGrB1D,IAAOqG,KAA4B,SAArB3F,KAAKZ,MAAM4D,OAHJ,IAMpBxD,EAA2B,SAArBQ,KAAKZ,MAAM4D,MAAmB0C,IAAgBD,IAC1D,OACI,yBAAKpG,UAAWkG,EAAS/F,IAAKA,EAAKE,IAAI,kB,GAb3BO,IAAMC,WAmBf6C,O,mBCxBf6C,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,qBAAqB,WAAa,6B,mBCA3FD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,cAAgB,iCAAiC,KAAO,0B,mMCM/GjF,EAAe,CACfkF,MAAO,CACH,CAAExF,GAAI,EAAGoE,QAAS,UAAWqB,MAAO,GACpC,CAAEzF,GAAI,EAAGoE,QAAS,mBAAoBqB,MAAO,IAC7C,CAAEzF,GAAI,EAAGoE,QAAS,WAAYqB,MAAO,IACrC,CAAEzF,GAAI,EAAGoE,QAAS,iBAAkBqB,MAAO,KAC7CC,MAAK,SAACjB,EAAGkB,GAAJ,OAAUA,EAAE3F,GAAKyE,EAAEzE,MAC1B4F,YAAa,MACbC,QAAS,KACTlH,OAAQ,IAuCCmH,EAAuB,SAACF,GAAD,MAAkB,CAClDjF,KAtDa,WAuDbiF,gBASSG,EAAY,SAACpH,GAAD,MAAa,CAACgC,KA9DpB,aA8DsChC,WAK5CqH,EAAiB,SAAC5H,GAC3B,OAAO,SAAC4E,GACJ3E,IAAWC,WAAWF,GACjBf,MAAK,SAAAC,GACF0F,EAd4B,CACxCrC,KA3DqB,mBA4DrBkF,QAYoCvI,EAAIG,YAK/BgB,EAAY,SAACL,GACtB,OAAO,SAAC4E,GACJ3E,IAAWI,UAAUL,GAChBf,MAAK,SAAAC,GAEF0F,EAAS+C,EAAUzI,EAAIG,YAK1BiB,EAAe,SAACC,GACzB,OAAO,SAACqE,GACJ3E,IAAWK,aAAaC,GACnBtB,MAAK,SAAAC,GAE0B,IAAxBA,EAAIG,KAAKiH,YACT1B,EAAS+C,EAAUpH,SAQxBqC,IArFQ,WAAmC,IAAlClB,EAAiC,uDAAzBQ,EAAcG,EAAW,uCAG/CwF,EAAU,WACZ,IAAIC,EAAmBpG,EAAM0F,MAAME,MAAK,SAACjB,EAAGkB,GAAJ,OAAUlB,EAAEzE,GAAK2F,EAAE3F,MAEvDmG,EAAU,CACVnG,GAFQkG,EAAiBA,EAAiBrI,OAAS,GAAGmC,GAAK,EAG3DoE,QAAS3D,EAAOmF,YAChBH,MAAO,GAEX,OAAO,2BACA3F,GADP,IAEI8F,YAAa,GACbJ,MAAM,CAAEW,GAAH,mBAAeD,EAAiBR,MAAK,SAACjB,EAAGkB,GAAJ,OAAUA,EAAE3F,GAAKyE,EAAEzE,WAI/DoG,EAAiB,SAACP,GACpB,OAAO,2BACA/F,GADP,IAEI+F,aAIR,OAAQpF,EAAOE,MACX,IA3CS,WA2CM,OAAOsF,IACtB,IA3CiB,mBA2CM,OAAOG,EAAe3F,EAAOoF,SACpD,IA3CW,aA2CM,OAAO,2BAAI/F,GAAX,IAAkBnB,OAAQ8B,EAAO9B,SAClD,IA3CY,cA2CM,OAAO,2BAAImB,GAAX,IACd0F,MAAO1F,EAAM0F,MAAMa,QAAO,SAAAzI,GAAC,OAAIA,EAAEoC,KAAOS,EAAO6F,YAEnD,QAAS,OAAOxG,K,qFCjDpBQ,EAAe,CACfiG,QAAS,CACL,CAAEvG,GAAI,EAAG2C,KAAM,UACf,CAAE3C,GAAI,EAAG2C,KAAM,SACf,CAAE3C,GAAI,EAAG2C,KAAM,UACf,CAAE3C,GAAI,EAAG2C,KAAM,SACf,CAAE3C,GAAI,EAAG2C,KAAM,QAEnBkC,SAAU,CACN,CAAE7E,GAAI,EAAGoE,QAAS,MAClB,CAAEpE,GAAI,EAAGoE,QAAS,gBAClB,CAAEpE,GAAI,EAAGoE,QAAS,uBAClB,CAAEpE,GAAI,EAAGoE,QAAS,6BAClB,CAAEpE,GAAI,EAAGoE,QAAS,SAkCboC,EAAqB,SAACC,GAAD,MAAqB,CACnD9F,KAlDgB,cAmDhB8F,mBAOWvF,IAvCQ,WAAmC,IAAlCpB,EAAiC,uDAAzBQ,EAAcG,EAAW,uCAO/CiG,EAAa,WACf,IAAIC,EAAOlG,EAAOgG,eACd5B,EAAW/E,EAAM+E,SAASa,MAAK,SAACjB,EAAGkB,GAAJ,OAAUlB,EAAEzE,GAAK2F,EAAE3F,MAElD4G,EAAa,CACb5G,GAFQ6E,EAASA,EAAShH,OAAS,GAAGmC,GAAK,EAG3CoE,QAASuC,GAGb,OAAO,2BACA7G,GADP,IAEI+E,SAAS,GAAD,mBAAM/E,EAAM+E,UAAZ,CAAsB+B,OAGtC,OAAQnG,EAAOE,MACX,IAzCY,cAyCM,OAAO+F,EAAWjG,EAAOgG,gBAE3C,QAAS,OAAO3G,K,kBC1CxBwF,EAAOC,QAAU,CAAC,IAAM,oBAAoB,KAAO,qBAAqB,OAAS,yB,0LCDpEsB,EAAsB,SAAC/G,EAAO1B,EAAQ0I,EAAaC,GAC5D,OAAO,2BACAjH,GADP,IAEIkH,MAAOlH,EAAMkH,MAAMrJ,KAAI,SAAAC,GACnB,OAAIA,EAAEkJ,KAAiB1I,EACZ,2BAAKR,GAAMmJ,GAEfnJ,QCOf0C,EAAe,CACf0G,MAAO,GACP5J,SAAU,GACV6J,gBAAiB,EACjBC,YAAa,EACb7C,YAAY,EACZ8C,oBAAqB,IA0BZC,EAAS,SAAChJ,GAAD,MAAa,CAC/BuC,KA5CW,SA6CXvC,WAESiJ,EAAW,SAACjJ,GAAD,MAAa,CACjCuC,KA/Ca,WAgDbvC,WAESkJ,EAAW,SAACN,GAAD,MAAY,CAChCrG,KAlDc,YAmDdqG,UAESO,EAAiB,SAACL,GAAD,MAAkB,CAC5CvG,KArDqB,mBAsDrBuG,gBAESM,EAAqB,SAACxJ,GAAD,MAAiB,CAC/C2C,KAxD0B,wBAyD1B3C,eAESyJ,EAAmB,SAACpD,GAAD,MAAiB,CAC7C1D,KA3DuB,qBA4DvB0D,eAESqD,EAA4B,SAACrD,EAAYsD,GAAb,MAA2B,CAChEhH,KA9DiC,+BA+DjC0D,aACAsD,aAKSC,EAAW,WAA8E,IAA7EzK,EAA4E,uDAA/DmD,EAAa4G,YAAa9J,EAAqC,uDAA1BkD,EAAalD,SACpF,8CAAO,WAAO4F,GAAP,eAAAyB,EAAA,6DACHzB,EAASyE,GAAiB,IAC1BzE,EAASuE,EAAepK,IAFrB,SAGcF,IAASC,aAAaC,EAAYC,GAHhD,OAGCK,EAHD,OAIHuF,EAASsE,EAAS7J,EAAKD,MACvBwF,EAASwE,EAAmB/J,EAAKO,aACjCgF,EAASyE,GAAiB,IANvB,2CAAP,uDAUEI,EAAkB,uCAAG,WAAO7E,EAAU8E,EAAU1J,EAAQ2J,EAAWC,GAA9C,SAAAvD,EAAA,6DACvBzB,EAAS0E,GAA0B,EAAMI,IADlB,SAEPC,EAAU3J,GAFH,OAGK,IAHL,OAGfX,KAAKiH,aACT1B,EAASgF,EAAc5J,IACvB4E,EAAS0E,GAA0B,EAAOI,KALvB,2CAAH,8DASXvJ,EAAe,SAACuJ,EAAU1J,GAAX,OAAsB,SAAC4E,GAAD,OAC9C6E,EAAmB7E,EAAU8E,EAAU1J,EAAQnB,IAASsB,aAAc8I,KAE7D7I,EAAY,SAACsJ,EAAU1J,GAAX,OAAsB,SAAC4E,GAAD,OAC3C6E,EAAmB7E,EAAU8E,EAAU1J,EAAQnB,IAASuB,UAAW4I,KAGxD/F,IAlFM,WAAmC,IAAlCvB,EAAiC,uDAAzBQ,EAAcG,EAAW,uCAE7C2G,EAAS,kBAAMP,EAAoB/G,EAAOW,EAAOrC,OAAQ,KAAM,CAAC6J,UAAU,KAC1EZ,EAAW,kBAAMR,EAAoB/G,EAAOW,EAAOrC,OAAQ,KAAM,CAAC6J,UAAU,KAElF,OAAQxH,EAAOE,MACX,IA1BO,SA0BM,OAAOyG,IACpB,IA1BS,WA0BM,OAAOC,IACtB,IA1BU,YA0BM,OAAO,2BAAKvH,GAAZ,IAAmBkH,MAAOvG,EAAOuG,QACjD,IA1BiB,mBA0BM,OAAO,2BAAKlH,GAAZ,IAAmBoH,YAAazG,EAAOyG,cAC9D,IA1BsB,wBA0BM,OAAO,2BAAKpH,GAAZ,IAAmBmH,gBAAiBxG,EAAOzC,aACvE,IA1BmB,qBA0BM,OAAO,2BAAK8B,GAAZ,IAAmBuE,WAAY5D,EAAO4D,aAC/D,IA1B6B,+BA0BM,OAAO,2BACnCvE,GAD4B,IAE/BqH,oBAAqB1G,EAAO4D,WAAP,sBACbvE,EAAMqH,qBADO,CACc1G,EAAOkH,WACtC7H,EAAMqH,oBAAoBd,QAAO,SAAAsB,GAAQ,OAAIA,IAAalH,EAAOkH,cAEzE,QAAS,OAAO7H,K,mBCzCxBwF,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,0C","file":"static/js/main.31356b73.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst axiosInstance = axios.create({\r\n  withCredentials: true,\r\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n  headers: {\r\n    'API-KEY': 'a0f96476-2d24-4a30-b807-f3b5d089b035'\r\n  }\r\n});\r\n\r\nconst randomPhotos = [\r\n  'https://media.istockphoto.com/vectors/cartoon-happy-monster-face-vector-halloween-green-cool-monster-avatar-vector-id833300086?k=6&m=833300086&s=170667a&w=0&h=QrZJzAUjI1wh7-bUGK1KqGHeA17IjDpxH7WdsznMlvw=',\r\n  'https://mygamehunter.ru/images/thumbnail/65933/550',\r\n  'https://media.istockphoto.com/vectors/angry-cartoon-monster-face-vector-halloween-green-cool-monster-avatar-vector-id1014862544?k=6&m=1014862544&s=170667a&w=0&h=F2i7SjG1SY5Hk3_pT6eEzb3PF2MTLMrs23rX3EzGYmw=',\r\n  'https://thumbs.dreamstime.com/b/cool-angry-cartoon-monster-vector-halloween-avatar-print-illustration-isolated-110119757.jpg',\r\n  'https://store.playstation.com/store/api/chihiro/00_09_000/container/GB/en/999/EP2402-CUSA05624_00-AV00000000000193/1576759987000/image?w=240&h=240&bg_color=000000&opacity=100&_version=00_09_000',\r\n  'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSikz6EP77U_dk2lzCRfoUUhbWReSWumTxN8A&usqp=CAU',\r\n  'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSFS2QulgeZAgJs3goKLS2gH2KFrz6u2wArfQ&usqp=CAU',\r\n  'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcT4rzR378sjWB7GIehkVE3tRWdqmvj9tBKWlQ&usqp=CAU',\r\n  'https://i.pinimg.com/originals/07/3c/ab/073cab634e29593b83771fc3f6b73ece.jpg',\r\n]\r\n\r\n\r\nexport const authAPI = {\r\n  authMe() {\r\n    return axiosInstance.get(`auth/me/`)\r\n  },\r\n  login(email, password, rememberMe = false) {\r\n    return axiosInstance.post(`/auth/login`, {email, password, rememberMe})\r\n  },\r\n  logout() {\r\n    return axiosInstance.delete(`/auth/login`)\r\n  },\r\n}\r\n\r\nexport const usersAPI = {\r\n  getUsersList(pageNumber = 1, pageSize = 10) {\r\n    return axiosInstance.get(`users?page=${pageNumber}&count=${pageSize}`).then(res => {\r\n      let i = 0\r\n      let arr = res.data.items.map(e => {\r\n        if (i === randomPhotos.length) i = 0\r\n        if (!e.photos.small) e.photos.small = randomPhotos[i++]\r\n        return e\r\n      })\r\n      return {\r\n        arr,\r\n        totalCount: res.data.totalCount\r\n      }\r\n    })\r\n  },\r\n  authMe() {\r\n    console.warn('Obsolete method. Please, use usersAPI object.');\r\n    return authAPI.authMe()\r\n  },\r\n  getUser(userId) {\r\n    console.warn('Obsolete method. Please, use profileAPI object.');\r\n    return profileAPI.getProfile(userId)\r\n  },\r\n  deleteFriend(userId) {\r\n    return axiosInstance.delete(`follow/${userId}`)\r\n  },\r\n  addFriend(userId) {\r\n    return axiosInstance.post(`follow/${userId}`)\r\n  }\r\n}\r\n\r\nexport const profileAPI = {\r\n  getProfile(userId) {\r\n    return axiosInstance.get(`profile/${userId}`)\r\n  },\r\n  getStatus(userId) {\r\n    return axiosInstance.get(`profile/status/${userId}`)\r\n  },\r\n  updateStatus(status) {\r\n    return axiosInstance.put(`profile/status`, {status})\r\n  },\r\n}\r\n\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport styles from './Header.module.sass'\r\nimport logo from '../../assets/img/logo.png'\r\n\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={styles.header}>\r\n      <img src={logo} alt='logo' className={styles.logo} />\r\n\r\n      <span className={styles.loginBlock}>\r\n        {\r\n          (props.isAuth ?\r\n            <div>\r\n              {props.login} <button onClick={props.logout}>Logout</button>\r\n            </div>\r\n            :\r\n            <NavLink to={'/login'}>Login</NavLink>)\r\n        }\r\n\r\n      </span>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react'\r\nimport Header from './Header'\r\nimport { connect } from 'react-redux'\r\nimport { logout } from '../../redux/reducer_auth'\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Header {...this.props} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n  login: state.auth.login,\r\n  email: state.auth.email,\r\n  id: state.auth.id,\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,\r\n  {\r\n    logout\r\n  }\r\n)(HeaderContainer);\r\n\r\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport styles from './Navbar.module.sass'\n\nconst Navbar = () => {\n  return (\n      <nav className={styles.nav}>\n        <div className={styles.item}>\n          <NavLink to='/profile' activeClassName={styles.active}>Profile</NavLink></div>\n        <div className={styles.item}>\n          <NavLink to='/messages' activeClassName={styles.active}>Messages</NavLink></div>\n        <div className={styles.item}>\n          <NavLink to='/news' activeClassName={styles.active}>News</NavLink></div>\n        <div className={styles.item}>\n          <NavLink to='/music' activeClassName={styles.active}>Music</NavLink></div>\n        <div className={styles.item}>\n          <NavLink to='/settings' activeClassName={styles.active}>Settings</NavLink></div>\n        <div className={styles.item}>\n          <NavLink to='/users' activeClassName={styles.active}>Find users</NavLink></div>\n      </nav>\n  )\n}\n\nexport default Navbar","import { getAuthUserData } from './reducer_auth'\r\n\r\n\r\nconst SET_INITIALIZED = 'SET_INITIALIZED'\r\n\r\nlet initialState = {\r\n    initialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    const setInitialized = () => {\r\n        return {\r\n            ...state,\r\n            initialized: true\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n        case SET_INITIALIZED: return setInitialized();\r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\n\r\n// Thunks\r\n\r\nexport const initializeSuccess = () => ({ type: SET_INITIALIZED })\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n    \r\n    Promise.all([dispatch(getAuthUserData())])\r\n    \r\n    .then(() => {\r\n        dispatch(initializeSuccess());\r\n    })\r\n    \r\n}\r\n\r\n\r\n\r\nexport default appReducer","let initialState = {\r\n\r\n}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    return state\r\n}\r\n\r\nexport default sidebarReducer","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\"\r\nimport appReducer from \"./reducer_app\"\r\nimport authReducer from \"./reducer_auth\"\r\nimport dialogsReducer from \"./reducer_dialogs\"\r\nimport profileReducer from \"./reducer_profile\"\r\nimport sidebarReducer from \"./reducer_sidebar\"\r\nimport usersReducer from \"./reducer_users\"\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n})\r\n\r\n// Necessary for Redux Devtools extensions installed im Opera, Chrome\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose; \r\nconst store = createStore(reducers, /* preloadedState, */ composeEnhancers(\r\n    applyMiddleware(thunkMiddleware)\r\n));\r\n\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\nexport default store","import React, { Suspense } from 'react';\nimport './App.sass';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Navbar from './components/Navbar/Navbar';\n// import ProfileContainer from './components/Profile/ProfileContainer';\n// import DialogsContainer from './components/Dialogs/DialogsContainer';\n// import UsersContainer from './components/Users/UsersContainer';\n// import Login from './components/Login/Login';\nimport { Route, withRouter } from 'react-router-dom';\nimport { initializeApp } from './redux/reducer_app'\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport Preloader from './components/common/Preloader/Preloader';\nimport store from './redux/redux-store'\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { lazy } from '@loadable/component'\n\nconst ProfileContainer = lazy(() => import('./components/Profile/ProfileContainer'))\nconst DialogsContainer = lazy(() => import('./components/Dialogs/DialogsContainer'))\nconst UsersContainer = lazy(() => import('./components/Users/UsersContainer'))\nconst Login = lazy(() => import('./components/Login/Login'))\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.initializeApp()\n  }\n\n  render() {\n\n    if (!this.props.initialized) {\n      return <Preloader color={'blue'} />\n    }\n\n    return (\n\n      <div className='appWrapper'>\n        <Preloader color={'none'} />\n        <HeaderContainer name={'Hello'} />\n\n        <Navbar />\n        <div className='appWrapperContent'>\n\n          <Suspense fallback={<Preloader color={'blue'} />}>\n            <Route path='/messages' render={() =>\n              <DialogsContainer />} />\n\n            <Route path='/profile/:userId?' render={() =>\n              <ProfileContainer />\n            } />\n\n            <Route path='/users' render={() =>\n              <UsersContainer />\n            } />\n\n            <Route path='/login' render={() =>\n              <Login />\n            } />\n          </Suspense>\n        </div>\n      </div>\n\n    )\n  }\n}\n\nlet mapStateToProps = (state) => {\n  return {\n    initialized: state.app.initialized\n  }\n}\n\nlet AppContainer = compose(\n  connect(mapStateToProps, { initializeApp }),\n  withRouter,\n)(App);\n\nconst MainApp = (props) => {\n  return <BrowserRouter>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </BrowserRouter>\n}\n\nexport default MainApp","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport MainApp from './App';\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\n// import state, {addPost, updateNewPostText, subscribe} from './redux/store'\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n      <MainApp />\r\n  // </React.StrictMode> \r\n  , document.getElementById('root')\r\n);\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();","import { stopSubmit } from 'redux-form'\r\nimport { authAPI } from '../api/api'\r\nconst SET_USER_DATA = 'SET_USER_DATA'\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isFetching: false,\r\n    isAuth: false,\r\n    isAuthingInProgress: true\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\r\n    const setUserData = () => {\r\n        return {\r\n            ...state,\r\n            ...action.payload,\r\n            isAuthingInProgress: false,\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n        case SET_USER_DATA: return setUserData();\r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const setAuthUserData = (id, email, login, isAuth) => ({\r\n    type: SET_USER_DATA,\r\n    payload: { id, email, login, isAuth }\r\n})\r\n\r\n// Thunks\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let res = await authAPI.authMe();\r\n\r\n    if (res.data.resultCode === 0) {\r\n        let { id, email, login } = res.data.data\r\n        dispatch(setAuthUserData(id, email, login, true))\r\n    }\r\n}\r\n\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n    let res = await authAPI.login(email, password, rememberMe)\r\n    if (res.data.resultCode === 0) {\r\n        dispatch(getAuthUserData())\r\n    } else {\r\n        console.log(res.data);\r\n        let errorMessage = res.data.messages.length > 0 ? res.data.messages[0] : \"Some error\";\r\n        dispatch(stopSubmit('login', { _error: errorMessage }))  // первый параметр название формы, второй свойства, в котором указывается поле и ошибка\r\n    }\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    let res = await authAPI.logout()\r\n    if (res.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer","import React from 'react';\r\nimport styles from './Preloader.module.sass'\r\nimport preloader from '../../../assets/img/spinner.svg'\r\nimport preloaderBlue from '../../../assets/img/spinnerBlue.svg'\r\nimport classNames from 'classnames' // https://github.com/JedWatson/classnames\r\n\r\nclass Preloader extends React.Component {\r\n\r\n\r\n\r\n    render() {\r\n        const classes = classNames({\r\n            [styles.preloader]: this.props.color === 'white',\r\n            [styles.preloaderBlue]: this.props.color === 'blue',\r\n            [styles.none]: this.props.color === 'none'\r\n        })\r\n\r\n        const src = this.props.color === 'blue' ? preloaderBlue : preloader\r\n        return (\r\n            <img className={classes} src={src} alt='preloader' />\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Preloader","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1EYTx\",\"logo\":\"Header_logo__3yMRc\",\"loginBlock\":\"Header_loginBlock___beH3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__6cQVN\",\"preloaderBlue\":\"Preloader_preloaderBlue__2K63N\",\"none\":\"Preloader_none__3t4JE\"};","import {profileAPI} from \"../api/api\"\r\n\r\nconst ADD_POST = 'ADD_POST'\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE'\r\nconst SET_STATUS = 'SET_STATUS'\r\nconst DELETE_POST = 'DELETE_POST'\r\n\r\nlet initialState = {\r\n    posts: [\r\n        { id: 2, message: 'Hi !! !', likes: 1 },\r\n        { id: 3, message: 'How are you? 123', likes: 11 },\r\n        { id: 4, message: 'Good day', likes: 21 },\r\n        { id: 5, message: 'Love mandarins', likes: 33 },\r\n    ].sort((a, b) => b.id - a.id),\r\n    newPostText: '123',\r\n    profile: null,\r\n    status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n\r\n    const addPost = () => {\r\n        let profilePagePosts = state.posts.sort((a, b) => a.id - b.id)\r\n        let newId = profilePagePosts[profilePagePosts.length - 1].id + 1\r\n        let newPost = {\r\n            id: newId,\r\n            message: action.newPostText,\r\n            likes: 0\r\n        }\r\n        return {\r\n            ...state,\r\n            newPostText: '',\r\n            posts: [newPost, ...profilePagePosts.sort((a, b) => b.id - a.id)]\r\n        }\r\n\r\n    }\r\n    const setUserProfile = (profile) => {\r\n        return {\r\n            ...state,\r\n            profile\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n        case ADD_POST: return addPost();\r\n        case SET_USER_PROFILE: return setUserProfile(action.profile);\r\n        case SET_STATUS: return {...state, status: action.status};\r\n        case DELETE_POST: return {...state, \r\n            posts: state.posts.filter(e => e.id !== action.postId)\r\n            };\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreator = (newPostText) => ({\r\n    type: ADD_POST,\r\n    newPostText\r\n})\r\n \r\n\r\nexport const setUserProfile = (profile) => ({\r\n    type: SET_USER_PROFILE,\r\n    profile\r\n})\r\n\r\nexport const setStatus = (status) => ({type: SET_STATUS, status})\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\n\r\n// Thunks\r\n\r\nexport const getUserProfile = (userId) => {\r\n    return (dispatch) => {\r\n        profileAPI.getProfile(userId)\r\n            .then(res => {\r\n                dispatch(setUserProfile(res.data))\r\n            })\r\n    }\r\n}\r\n\r\nexport const getStatus = (userId) => {\r\n    return (dispatch) => {\r\n        profileAPI.getStatus(userId)\r\n            .then(res => {\r\n                \r\n                dispatch(setStatus(res.data))\r\n            })\r\n    }\r\n}\r\n\r\nexport const updateStatus = (status) => {\r\n    return (dispatch) => {\r\n        profileAPI.updateStatus(status)\r\n            .then(res => {\r\n                \r\n                if (res.data.resultCode === 0) {\r\n                    dispatch(setStatus(status))\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default profileReducer","const ADD_MESSAGE = 'ADD_MESSAGE'\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        { id: 2, name: 'Andrew' },\r\n        { id: 3, name: 'Sveta' },\r\n        { id: 4, name: 'Zhenya' },\r\n        { id: 5, name: 'Georg' },\r\n        { id: 6, name: 'Max' },\r\n    ],\r\n    messages: [\r\n        { id: 2, message: 'Hi' },\r\n        { id: 3, message: 'How are you?' },\r\n        { id: 4, message: 'I am fine! Are you?' },\r\n        { id: 5, message: 'I am fine too! Thank you!' },\r\n        { id: 6, message: 'Hi!' },\r\n    ]\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n    // const updateNewMessageText = (newMessageText) => {\r\n    //     return {\r\n    //         ...state,\r\n    //         newMessageText\r\n    //     }\r\n    // }\r\n    const addMessage = () => {\r\n        let text = action.newMessageText\r\n        let messages = state.messages.sort((a, b) => a.id - b.id)\r\n        let newId = messages[messages.length - 1].id + 1\r\n        let newMessage = {\r\n            id: newId,\r\n            message: text,\r\n        }\r\n        // updateNewMessageText('')\r\n        return {\r\n            ...state,\r\n            messages: [...state.messages, newMessage],\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case ADD_MESSAGE: return addMessage(action.newMessageText);\r\n        // case UPDATE_NEW_MESSAGE_TEXT: return updateNewMessageText(action.newMessageText);\r\n        default: return state;\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const sendMessageCreator = (newMessageText) => ({\r\n    type: ADD_MESSAGE,\r\n    newMessageText\r\n})\r\n// export const updateMessageCreator = (newMessageText) => ({\r\n//     type: UPDATE_NEW_MESSAGE_TEXT,\r\n//     newMessageText\r\n// })\r\n\r\nexport default dialogsReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__14svW\",\"item\":\"Navbar_item__1lyBJ\",\"active\":\"Navbar_active__38i5Y\"};","export const updateObjectInArray = (state, userId, objPropName, newObjProps) => {\r\n    return {\r\n        ...state,\r\n        users: state.users.map(e => {\r\n            if (e[objPropName] === userId) {\r\n                return { ...e, ...newObjProps }\r\n            }\r\n            return e\r\n        })\r\n    }\r\n}","import { usersAPI } from '../api/api'\r\nimport { updateObjectInArray } from '../utils/objectHelpers'\r\n\r\nconst FOLLOW = 'FOLLOW'\r\nconst UNFOLLOW = 'UNFOLLOW'\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT'\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS'\r\n\r\n\r\n\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n    const follow = () => updateObjectInArray(state, action.userId, 'id', {followed: true})\r\n    const unfollow = () => updateObjectInArray(state, action.userId, 'id', {followed: false})\r\n    \r\n    switch (action.type) {\r\n        case FOLLOW: return follow();\r\n        case UNFOLLOW: return unfollow();\r\n        case SET_USERS: return { ...state, users: action.users };\r\n        case SET_CURRENT_PAGE: return { ...state, currentPage: action.currentPage };\r\n        case SET_TOTAL_USERS_COUNT: return { ...state, totalUsersCount: action.totalCount };\r\n        case TOGGLE_IS_FETCHING: return { ...state, isFetching: action.isFetching };\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS: return {\r\n            ...state,\r\n            followingInProgress: action.isFetching ?\r\n                [...state.followingInProgress, action.buttonId] :\r\n                state.followingInProgress.filter(buttonId => buttonId !== action.buttonId)\r\n        };\r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const follow = (userId) => ({\r\n    type: FOLLOW,\r\n    userId\r\n})\r\nexport const unfollow = (userId) => ({\r\n    type: UNFOLLOW,\r\n    userId\r\n})\r\nexport const setUsers = (users) => ({\r\n    type: SET_USERS,\r\n    users\r\n})\r\nexport const setCurrentPage = (currentPage) => ({\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage\r\n})\r\nexport const setUsersTotalCount = (totalCount) => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    totalCount\r\n})\r\nexport const toggleIsFetching = (isFetching) => ({\r\n    type: TOGGLE_IS_FETCHING,\r\n    isFetching\r\n})\r\nexport const toggleFollowingInProgress = (isFetching, buttonId) => ({\r\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    buttonId\r\n})\r\n\r\n// Thunks\r\n\r\nexport const getUsers = (pageNumber = initialState.currentPage, pageSize = initialState.pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true))\r\n        dispatch(setCurrentPage(pageNumber))\r\n        let data = await usersAPI.getUsersList(pageNumber, pageSize)\r\n        dispatch(setUsers(data.arr))\r\n        dispatch(setUsersTotalCount(data.totalCount))\r\n        dispatch(toggleIsFetching(false))\r\n    }\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, btnIndex, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingInProgress(true, btnIndex))\r\n    let res = await apiMethod(userId)\r\n    if (res.data.resultCode === 0) {\r\n        dispatch(actionCreator(userId))\r\n        dispatch(toggleFollowingInProgress(false, btnIndex))\r\n    }\r\n}\r\n\r\nexport const deleteFriend = (btnIndex, userId) => (dispatch) =>\r\n    followUnfollowFlow(dispatch, btnIndex, userId, usersAPI.deleteFriend, unfollow)\r\n\r\nexport const addFriend = (btnIndex, userId) => (dispatch) =>\r\n    followUnfollowFlow(dispatch, btnIndex, userId, usersAPI.addFriend, follow)\r\n\r\n\r\nexport default usersReducer","module.exports = __webpack_public_path__ + \"static/media/logo.73dd6543.png\";","module.exports = __webpack_public_path__ + \"static/media/spinner.b4c52705.svg\";","module.exports = __webpack_public_path__ + \"static/media/spinnerBlue.489bc18c.svg\";"],"sourceRoot":""}